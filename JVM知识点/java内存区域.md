#  JVM 知识点 12.19日笔记 
> 自己看《深入理解Java虚拟机》的重要知识点总结  

## java内存区域 
- 运行数据区域分为： 程序计数器，java虚拟机栈，本地方法栈，java堆，方法区，运行时常量池  
-  **程序计数器**  
1、线程私有，当前线程执行的字节码的行号指示器，**这个东西自己理解就是指示代码执行顺序的，所以自然而然线程私有**，字节码解释器也就是根据计数器的值来依次选取下一条需要执行的字节码指令。  
2、线程中如果执行的是**java方法**，计数器记录**正在执行的虚拟机字节码指令地址**；如果是**native方法，计数器就为空**。   
3、这一块内存区域是java虚拟机规范中唯一一块没有规定任何 OutofMemoryError的区域  
- **java虚拟机栈 **  
1、线程私有，描述的是java方法执行的内存模型。每个方法执行会创建一个**栈帧，存储局部变量表，操作数栈，动态链接，方法出口等信息**。方法调用到完成的过程就是对应着一个栈帧在虚拟机中入栈和出栈的过程。自己的理解是：**方法调用执行入栈，结束出栈。 **  
2、局部变量表：存放编译可知的8种基本数据类型+对象引用类型。其中long和double占用2个局部变量空间，其他都值占用1个  
3、两种异常：StackOverflowError异常与OutofMemoryError异常
- **本地方法栈**   
1、与java虚拟机栈作用类似，上面的执行java方法，这个执行native方法  
2、一样是两种：StackOverflowError异常与OutofMemoryError异常  
- **java堆**   
1、所有线程共享，虚拟机启动创建，虚拟机**内存中最大的**一块。唯一作用：**存放对象实例**，几乎所有对象实例也都在这里分配。这个也就是 GC 堆，一般说的堆栈，这个是堆，上面的java虚拟机栈就是栈。  
2、堆在**物理空间上是可以不连续的**，只要逻辑上连续即可；堆内分为新生代和老年代，具体又可分为Eden,From Survivor,To Survivor.后面笔记详细描述，这里会涉及到GC的算法。  
3、只会抛出OutofMemoryError异常 
- **方法区**  
1、线程共享，用于存储**已被虚拟机加载的类信息，常量，静态变量，即时编译器编译后的代码数据**。别名：非堆，它可以和java堆一样不需要连续的内存；
2、它可以不进行垃圾收集，进行**回收的主要目标是对常量池的回收，和对类型的卸载。**
3、只会抛出OutofMemoryError异常 ‘
- **运行时常量池**  
1、运行时常量池是方法区的一部分，虚拟机在完成类装载后，**将class文件中的常量池载入内存，并保存在方法区后的版本可以理解为为运行时常量池。**运行时常量池保存**class文件中的符号引用，和直接引用**。  
2、class 文件包括类版本号，字段，方法，接口等描述信息，常量池；class常量池用于存放编译期生成的**各种字面量和符号引用**。class常量池也称为静态常量池，每一个class文件都有class常量池。  
延伸知识：百度的。  	
	字面量包括：1.文本字符串 2.八种基本类型的值 3.被声明为final的常量等;  
	符号引用包括：1.类和方法的全限定名 2.字段的名称和描述符 3.方法的名称和描述符。  
3、两个东西不要搞混，class文件常量池和运行时常量池是两个东西。运行时常量池重要特征是具备**动态性**。  
4、由于是方法区的一部分，所以只会抛出OutofMemoryError异常 
